(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[220],{285:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/accept-invite",function(){return s(2470)}])},2470:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var a=s(5893),n=s(7294),r=s(1163),l=s(7066);function i(){let e=(0,r.useRouter)(),{token:t}=e.query,[s,i]=(0,n.useState)(""),[u,c]=(0,n.useState)(""),[d,o]=(0,n.useState)(""),[x,m]=(0,n.useState)(""),[h,p]=(0,n.useState)(!1),[b,f]=(0,n.useState)(""),[v,y]=(0,n.useState)(!0);(0,n.useEffect)(()=>{t&&(y(!0),l.Z.post("/api/auth/check-invite",{token:t}).then(e=>f(e.data.email)).catch(()=>o("유효하지 않은 초대 토큰입니다.")).finally(()=>y(!1)))},[t]);let g=function(e){if(e.length<8)return!1;let t=0;return/[A-Za-z]/.test(e)&&t++,/[0-9]/.test(e)&&t++,/[^A-Za-z0-9]/.test(e)&&t++,t>=2}(s),N=g&&s===u&&!h&&!!t&&!!b,j=async a=>{if(a.preventDefault(),o(""),m(""),!t)return o("초대 토큰이 없습니다.");if(!g)return o("비밀번호 규칙을 확인하세요.");if(s!==u)return o("비밀번호가 일치하지 않습니다.");p(!0);try{await l.Z.post("/api/auth/accept-invite",{token:t,password:s}),m("가입이 완료되었습니다. 로그인 해주세요."),setTimeout(()=>e.push("/login"),1500)}catch(e){var n,r;o((null===(r=e.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.message)||"가입 실패")}finally{p(!1)}};return v?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:"초대 정보 확인 중..."}):(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:(0,a.jsxs)("form",{onSubmit:j,className:"bg-white p-8 rounded shadow w-80",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center",children:"비밀번호 설정"}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"block text-sm mb-1",children:"이메일"}),(0,a.jsx)("input",{type:"email",value:b,disabled:!0,className:"w-full px-3 py-2 border rounded bg-gray-100 text-gray-500"})]}),(0,a.jsx)("input",{type:"password",placeholder:"새 비밀번호",className:"w-full mb-2 px-3 py-2 border rounded",value:s,onChange:e=>i(e.target.value),required:!0}),(0,a.jsx)("input",{type:"password",placeholder:"비밀번호 확인",className:"w-full mb-2 px-3 py-2 border rounded",value:u,onChange:e=>c(e.target.value),required:!0}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-2",children:"비밀번호 규칙: 8자 이상, 영문/숫자/특수문자 중 2종류 이상"}),!g&&s.length>0&&(0,a.jsx)("div",{className:"text-red-500 text-xs mb-2",children:"비밀번호 규칙을 확인하세요."}),s&&u&&s!==u&&(0,a.jsx)("div",{className:"text-red-500 text-xs mb-2",children:"비밀번호가 일치하지 않습니다."}),d&&(0,a.jsx)("div",{className:"text-red-500 text-sm mb-2",children:d}),x&&(0,a.jsx)("div",{className:"text-green-600 text-sm mb-2",children:x}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 disabled:opacity-50",disabled:!N,children:h?"설정 중...":"비밀번호 설정"})]})})}},1163:function(e,t,s){e.exports=s(3079)}},function(e){e.O(0,[66,888,774,179],function(){return e(e.s=285)}),_N_E=e.O()}]);