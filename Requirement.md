# Ticket System 요구사항 및 구현 현황

## 1. 주요 요구사항
- Next.js, Express, Prisma, PostgreSQL, MinIO, Socket.io, Tailwind 기반 Zendesk 스타일 고객 티켓 시스템
- **주요 기능**
  - 이메일 초대 기반 회원가입
  - 비밀번호 재설정
  - 유저 권한 관리(관리자/에이전트/고객)
  - 실시간 채팅
  - 파일 첨부
  - 이메일 알림
  - 고유 티켓 번호
- **관리자 전용**
  - 사용자 관리(목록, 초대, 권한 변경, 삭제)
  - 초대 메일 템플릿 관리

---

## 2. 구현 현황

### [O] 관리자/유저 관리
- [O] 관리자만 접근 가능한 사용자 목록/초대/삭제/권한변경
- [O] 초대/가입/삭제/권한변경 시 목록 자동 갱신 및 피드백
- [O] 초대만 된 유저와 가입 완료 유저를 Invite/User 테이블로 구분 및 통합 표시
- [O] 초대 삭제(Invite 테이블에서 삭제)
- [O] 초대 메일 템플릿 CRUD (InviteEmailTemplate)

### [O] 인증/초대/가입
- [O] 초대 메일 발송 및 토큰 기반 가입
- [O] 비밀번호 규칙 및 설정/재설정
- [O] accept-invite API 및 프론트엔드 페이지
- [O] 비밀번호 재설정(이메일 발송)

### [O] 실시간 채팅/파일 첨부
- [O] Socket.io 기반 실시간 채팅
- [O] 파일 첨부 및 MinIO 연동

### [O] 고유 티켓 번호/기본 티켓 기능
- [O] 티켓 생성/조회/상태 관리
- [O] 고유 티켓 번호 생성

### [O] 관리자 UX 개선
- [O] 성공/실패 메시지, 상태별 구분, 자동 갱신 등

---

## 3. 테스트 현황
- [O] 관리자 페이지에서 초대/가입/삭제/권한변경/초대메일 템플릿 관리 정상 동작
- [O] 초대/가입/삭제/상태관리 등 관리자 중심의 UX 정상 동작
- [O] 초대/가입/삭제 등 액션에 대해 자동 갱신 및 피드백 정상 동작
- [O] 초대 메일 템플릿이 없을 때 404, 잘못된 토큰/가입 시 400/500 등 예외 처리 확인
- [O] curl로 백엔드 API 직접 호출 시 정상 동작 확인
- [△] 프론트엔드에서 accept-invite(가입) 시 500 에러 → body 전달/파싱 문제 진단 및 수정 중
- [△] 일부 React minified error(418/423/425) → API 실패 시 방어 코드 추가 필요

---

## 4. 향후 할 일/개선 과제
- [ ] 프론트엔드 accept-invite 500 에러 완전 해결 (body 전달/파싱 문제 최종 점검)
- [ ] 프론트엔드에서 API 실패(undefined/null) 시 방어 코드 추가 및 UX 개선
- [ ] 관리자 계정 비밀번호 분실 시 재설정 UX 강화(이메일 발송 등)
- [ ] 테스트 자동화(e2e, 통합테스트 등) 및 문서화
- [ ] 실서비스 배포 환경에서의 보안/환경 변수 점검
- [ ] 기타 실무적 진단/운영 가이드 추가

---

## 5. 참고/특이사항
- 초대/가입/삭제/상태관리 등 관리자 중심의 핵심 기능과 UX는 대부분 구현 및 개선 완료
- Invite 테이블 도입으로 초대 상태 관리까지 완성
- 일부 API(body 파싱 등)와 프론트 방어 코드, 에러 UX 등은 추가 개선 필요 